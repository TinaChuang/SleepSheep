{"version":3,"sources":["webpack:///./src/views/frontend/Products.vue?b1af","webpack:///src/views/frontend/Products.vue","webpack:///./src/views/frontend/Products.vue?d1b1","webpack:///./src/views/frontend/Products.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","_v","staticClass","_l","item","key","id","imageUrl","title","_s","_f","origin_price","price","status","loadingItem","preventDefault","addToCart","staticStyle","_e","staticRenderFns","data","products","newProducts","filterType","created","getProducts","methods","$http","product","quantity","component"],"mappings":"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","file":"js/chunk-2d0dd9be.802388fd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('h2',[_vm._v(\"商品列表\")]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row my-3\"},_vm._l((_vm.products),function(item){return _c('div',{key:item.id,staticClass:\"col-6 col-md-4 col-xl-3\"},[_c('div',{staticClass:\"card shadow-sm border-0 mb-4 rounded\"},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.id))}},[_c('img',{staticClass:\"card-img-top\",attrs:{\"src\":item.imageUrl[0]},on:{\"alt\":item.title}})]),_c('div',{staticClass:\"card-body d-flex flex-column align-items-center justify-content-center\"},[_c('h4',{staticClass:\"mb-0\"},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.id))}},[_vm._v(_vm._s(item.title))])],1),_c('div',{staticClass:\"mt-2 d-lg-flex\"},[_c('del',{staticClass:\"text-muted mr-sm-3\"},[_c('small',[_vm._v(\"原價：\"+_vm._s(_vm._f(\"money\")(item.origin_price)))])]),_c('p',{staticClass:\"text-primary mb-0\"},[_vm._v(\"售價：\"),_c('strong',[_vm._v(_vm._s(_vm._f(\"money\")(item.price)))])])])]),_c('div',{staticClass:\"card-footer d-flex\"},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.id))}},[_c('button',{staticClass:\"btn btn-outline-secondary btn-sm\",attrs:{\"type\":\"button\"}},[_vm._v(\"查看更多\")])]),_c('button',{staticClass:\"btn btn-outline-primary btn-sm ml-auto\\n            d-flex align-items-center\",attrs:{\"type\":\"button\",\"disabled\":_vm.status.loadingItem === item.id},on:{\"click\":function($event){$event.preventDefault();return _vm.addToCart(item.id)}}},[_vm._v(\"加入購物車 \"),(_vm.status.loadingItem === item.id)?_c('i',{staticClass:\"ml-2 spinner-grow spinner-grow-sm d-md-none d-lg-block\",staticStyle:{\"width\":\"12px\",\"height\":\"12px\"}}):_vm._e()])],1)],1)])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"/>\r\n    <h2>商品列表</h2>\r\n    <div class=\"container\">\r\n      <div class=\"row my-3\">\r\n        <div\r\n          class=\"col-6 col-md-4 col-xl-3\"\r\n          v-for=\"item in products\"\r\n          :key=\"item.id\"\r\n        >\r\n          <div class=\"card shadow-sm border-0 mb-4 rounded\">\r\n            <router-link :to=\"`/product/${item.id}`\">\r\n              <img\r\n                class=\"card-img-top\"\r\n                :src=\"item.imageUrl[0]\"\r\n                @alt=\"item.title\"\r\n              />\r\n            </router-link>\r\n            <div class=\"card-body d-flex flex-column align-items-center justify-content-center\">\r\n              <h4 class=\"mb-0\">\r\n                <router-link :to=\"`/product/${item.id}`\">{{ item.title }}</router-link>\r\n              </h4>\r\n              <div class=\"mt-2 d-lg-flex\">\r\n                <del class=\"text-muted mr-sm-3\">\r\n                  <small>原價：{{ item.origin_price | money }}</small>\r\n                </del>\r\n                <p class=\"text-primary mb-0\">售價：<strong>{{ item.price | money }}</strong>\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-footer d-flex\">\r\n              <router-link :to=\"`/product/${item.id}`\">\r\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\">查看更多</button>\r\n              </router-link>\r\n\r\n              <button type=\"button\" class=\"btn btn-outline-primary btn-sm ml-auto\r\n              d-flex align-items-center\" @click.prevent=\"addToCart(item.id)\"\r\n              :disabled=\"status.loadingItem === item.id\">加入購物車\r\n                <i class=\"ml-2 spinner-grow spinner-grow-sm d-md-none d-lg-block\"\r\n                v-if=\"status.loadingItem === item.id\" style=\"width:12px;height:12px\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      newProducts: [],\r\n      filterType: '',\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      this.isLoading = true\r\n      const getProductsApi = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products`\r\n      this.$http\r\n        .get(getProductsApi)\r\n        .then(res => {\r\n          console.log(res)\r\n          this.isLoading = false\r\n          this.products = res.data.data\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    addToCart (id, quantity = 1) {\r\n      this.isLoading = true\r\n      const addToCartApi = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product: id,\r\n        quantity\r\n      }\r\n      this.$http\r\n        .post(addToCartApi, cart)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.status.loadingItem = ''\r\n          this.$bus.$emit('get-cart')\r\n          this.$bus.$emit(\r\n            'message:push',\r\n            '商品已成功加入購物車!',\r\n            'success'\r\n          )\r\n        })\r\n        .catch(err => {\r\n          this.isLoading = false\r\n          this.status.loadingItem = ''\r\n          this.$bus.$emit(\r\n            'message:push',\r\n            `加入失敗!${err.response.data.errors}`,\r\n            'danger'\r\n          )\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Products.vue?vue&type=template&id=16c78046&\"\nimport script from \"./Products.vue?vue&type=script&lang=js&\"\nexport * from \"./Products.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}