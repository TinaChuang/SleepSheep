(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2197"],{2355:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t.carts.length?s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col bg-white py-5",staticStyle:{"min-height":"calc(100vh - 81px - 81px)"}},[t._m(0),s("hr",{staticClass:"border-dark mb-0",staticStyle:{"border-width":"1.5px"}}),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped mb-0"},[t._m(1),s("tbody",t._l(t.carts,(function(a){return s("tr",{key:a.product.id+1},[s("td",{staticClass:"text-center px-0",staticStyle:{width:"100px"}},[s("img",{staticStyle:{height:"100px","object-fit":"cover"},attrs:{src:a.product.imageUrl[0],alt:""}})]),s("td",{staticClass:"align-middle text-center",staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(a.product.title)+" ")]),s("td",{staticClass:"align-middle text-center",staticStyle:{"min-width":"125px"}},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-primary btn-sm  d-flex align-items-center",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(s){a.quantity--,t.updateQuantity(a.product.id,a.quantity)}}},[t.status.loadingUpdateCart===a.product.id?s("span",{staticClass:"spinner-border spinner-border-sm",staticStyle:{width:"12px",height:"12px"}}):s("span",[t._v("-")])])]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control text-center",attrs:{min:"1",type:"number",disabled:1===a.quantity},domProps:{value:a.quantity},on:{keyup:function(s){return t.updateQuantity(a.product.id,a.quantity)},input:function(s){s.target.composing||t.$set(a,"quantity",s.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary btn-sm d-flex align-items-center",attrs:{type:"button",disabled:t.status.loadingUpdateCart===a.product.id},on:{click:function(s){a.quantity++,t.updateQuantity(a.product.id,a.quantity)}}},[t.status.loadingUpdateCart===a.product.id?s("span",{staticClass:"spinner-border spinner-border-sm",staticStyle:{width:"12px",height:"12px"}}):s("span",[t._v("+")])])])])]),s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(t._f("money")(a.product.price*a.quantity))+" ")]),s("td",{staticClass:"align-middle text-center"},[s("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.deleteCartItem(a.product.id)}}},[s("i",{staticClass:"fas fa-trash-alt"}),t._v(" 移除 ")])])])})),0)])]),s("div",{staticClass:"container"},[t.cartTotal>0?s("div",{staticClass:"d-flex justify-content-end mt-4"},[s("p",{staticClass:"mb-0 h4 font-weight-bold",staticStyle:{"min-width":"80px"}},[t._v("總金額")]),s("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v(t._s(t._f("money")(t.cartTotal)))])]):t._e()]),s("div",{staticClass:"row d-flex justify-content-between mt-4"},[s("div",{staticClass:"col-md-2"},[s("router-link",{staticClass:"btn btn-outline-dark btn-block",attrs:{to:"/products"}},[t._v(" 繼續選購 ")])],1),s("div",{staticClass:"col-md-2 mt-3 mt-md-0"},[s("router-link",{staticClass:"btn btn-outline-primary btn-block",attrs:{to:"/cart-message"}},[t._v(" 下一步 ")])],1)])])])]):s("div",{staticClass:"container"},[t._m(2),s("div",{staticClass:"row d-flex justify-content-center mt-3 mb-5"},[s("div",{staticClass:"col-md-2"},[s("router-link",{staticClass:"btn btn-outline-dark btn-block",attrs:{to:"/products"}},[t._v(" 繼續選購 ")])],1)])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex justify-content-center"},[s("h2",{staticClass:"text-dark mb-0 font-weight-bold"},[t._v("購物車")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"text-center"},[s("td",[t._v("產品圖片")]),s("td",[t._v("產品名稱")]),s("td",[t._v("數量")]),s("td",[t._v("價格")]),s("td",[t._v("刪除")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row flex-column justify-content-center align-items-center"},[s("div",{staticClass:"col bg-white pt-5"},[s("div",{staticClass:"d-flex justify-content-center"},[s("h2",{staticClass:"text-dark mb-0 font-weight-bold"},[t._v("購物車")])]),s("hr",{staticClass:"border-dark mb-0",staticStyle:{"border-width":"1.5px"}}),s("div",{staticClass:"d-flex justify-content-center"},[s("p",{staticClass:"h3 text-dark mt-3"},[t._v("購物車無商品，快去逛逛！")])])]),s("div",{staticClass:"col-md-5"},[s("img",{staticClass:"img-fluid mt-3",attrs:{src:"https://hexschool-api.s3.us-west-2.amazonaws.com/custom/nOoInzZIltvbLPKRcHKMFc3zyqrQyBWAGRaN9ke6zVSP9LaMndr8ta41GVAAZhKyOJ4apHZjHwuPv7sgyA96GoF4cXLSSXip7puDq1JRXK7Z7wdr8kIdnwMKU7XvB2tc.jpg",alt:""}})])])}],n=(s("99af"),s("4160"),s("159b"),{data:function(){return{carts:[],cartTotal:0,isLoading:!1,status:{loadingUpdateCart:""}}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("e3cf317a-b68f-4629-9716-f0f4ec843e36","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,t.status.loadingUpdateCart="",t.carts=a.data.data,t.totalPriceHandler()})).catch((function(a){console.log(a),t.isLoading=!1,t.status.loadingItem=""}))},totalPriceHandler:function(){var t=0;this.carts.forEach((function(a){t+=a.product.price*a.product.quantity})),this.cartTotal=t},quantityHandler:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.loadingUpdateCart=t;var i="".concat("https://course-ec-api.hexschool.io/api","/").concat("e3cf317a-b68f-4629-9716-f0f4ec843e36","/ec/shopping"),e={product:t,quantity:s};this.$http.get(i,e).than((function(t){a.status.loadingUpdateCart="",a.getCart(),a.$bus.$emit("message:push","商品數量更新成功!","success")})).catch((function(t){console.log(t),a.status.loadingUpdateCart="",a.$bus.$emit("message:push","商品數量更新失敗!","danger")}))},deleteProdsHandler:function(t){var a=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/api","/").concat("e3cf317a-b68f-4629-9716-f0f4ec843e36","/ec/shopping/").concat(t);this.$http.delete(s).then((function(t){a.isLoading=!1,a.getCart(),a.$bus.$emit("get-cart"),a.$bus.$emit("message:push","商品已刪除!","success")})).catch((function(){a.isLoading=!1,a.$bus.$emit("message:push","商品刪除失敗!","danger")}))}}}),c=n,r=s("2877"),o=Object(r["a"])(c,i,e,!1,null,null,null);a["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0b2197.5203cc20.js.map